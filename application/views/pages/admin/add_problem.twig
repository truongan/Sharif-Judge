{#
 # Wecode Judge
 # file: add_problem.twig
 # author:truongan (hostmaster@truongan.name.vn)
 #}
{% set selected = 'Problems' %}
{% extends 'templates/base.twig' %}
{% block icon %}{{ edit ? 'fa-edit' : 'fa-plus-square' }}{% endblock %}
{% block title %}{{ edit ? 'Edit' : 'Add' }} Assignment{% endblock %}
{% block head_title %}{{ edit ? 'Edit' : 'Add' }} Assignment{% endblock %}



{% block other_assets %}
{# <link rel="stylesheet" type="text/css" href="{{ base_url('assets/select2/select2.min.css') }}">
<style type="text/css">
form {
	width: 100%;
	margin-bottom: 1em;
}
form  select{
	width: 180px;
}

input[type='number'].short_text{
	width: 80px!important;
}
.short_text{
	width: 90px!important;
}
.medium_text{
	min-width: 150px!important;
} #}

</style>
{% endblock %}

{% block body_end %}

<script type="text/javascript">shj.num_of_problems={{ problems|length }};</script>
{% endblock %}


{% block title_menu %}
<span class="title_menu_item">
	<a href="https://github.com/truongan/wecode-judge/blob/docs/v1.4/add_assignment.md" target="_blank"><i class="fa fa-question-circle color1"></i> Help</a>
</span>
{% endblock %}



{% block main_content %}
<div class="col">
{% set msgclasses = {'text-success': 'text-success', 'text-info': 'text-warning', 'text-danger': 'text-danger'} %}

{% for message in messages %}
	<p class="{{ msgclasses[message.type] }}">{{ message.text }}</p>
{% endfor %}

{% if edit %}
<p>
	<i class="fa fa-info-circle fa-lg color8"></i> If you don't want to change tests or pdf file, just do not upload its file.
</p>
{% endif %}

{{ form_open_multipart(edit ? 'problems/edit/'~edit_problem.id : 'problems/put') }}

	<div class="row">
		<div class="col-sm-6">
			<fieldset class="form-group">
				<div class="form-row">
					<div class="col-sm-4">
						<label for="form_a_name">Problem Name</label>
					</div>
					<div class="col-sm-8">
						<input id="problem_name" type="text" name="problem_name" class="form-control col-xs-7" value="{{ edit ? edit_problem.name : set_value('problem_name') }}"/>
						{{ form_error('problem_name', '<div class="alert alert-danger">', '</div>') }}
					</div>
				</div>
			</fieldset>
			<fieldset class="form-group">
				<div class="form-row">
					<div class="col-sm-4">
						<label for="form_a_name">Diff command</label>
					</div>
					<div class="col-sm-8">
						<input id="form_a_name" type="text" name="diff_cmd" class="form-control col-xs-7" value="{{ edit ? edit_problem.diff_cmd : set_value('diff_cmd') }}"/>
					</div>
				</div>
			</fieldset>
			<fieldset class="form-group">
				<div class="form-row">
					<div class="col-sm-4">
						<label for="diff_arg">Diff arguments</label>
					</div>
					<div class="col-sm-8">
						<input id="form_a_name" type="text" name="diff_arg" class="form-control col-xs-7" value="{{ edit ? edit_problem.diff_arg : set_value('diff_arg') }}"/>
					</div>
				</div>
			</fieldset>
		
			<fieldset class="form-group">
				<div class="form-row">
					<div class="col-sm-4">
						<label for="form_tests_desc">Tests and Descriptions (zip file)</label>
					</div>
					<div class="col-sm-8">
						<div class="custom-file">
							<input id="form_tests_desc" type="file" name="tests_desc" class="custom-file-input" />
							<label class="custom-file-label text-muted"><small>Test and description zip file</small></label>
						</div>
					</div>
				</div>
			</fieldset>

		</div>

		<div class="col-sm-6">
			<fieldset class="form-group">
				<div class="form-row">
						<label for="admin_note">Admin's note</label>
				<textarea id="admin_note" name="admin_note" rows="8" class="form-control add_text">{{ edit ? edit_problem.late_rule : set_value('late_rule', default_late_rule, false) }}</textarea>
			</fieldset>
		</div>
	</div>

		<label>Click on the button to add more language for this problems</label></br>
	<div class ="form-row">
		{% for lang in all_languages %}
			
				<a name="" id="" class="btn btn-primary mr-2 add_{{ lang.name }} {{ languages[lang.id] ? "d-none" : "" }}" href="#" role="button">{{ lang.name }}</a>
			
		{% endfor %}
	</div>

	<div class="form-row">
	<table id="problems_table" class="table mt-2 table-striped">
		<thead class="thead-light">
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Time Limit (ms)</th>
			<th>Memory<br>Limit (kB)</th>
			<th>Remove</th>
		</tr>
		</thead class="form-inline">
		<tbody>
			{% for lang in all_languages %}
			<tr class = "lang_row_{{ lang.name }} {{ languages[lang.id] ? "" : "d-none" }}">
				<input type="hidden" name="enable[]" vaue="{{ languages[lang.id] ? "1" : "0" }}"/>
				<td>{{ lang.id }} <input type="hidden" name="language_id[]" value="{{ lang.id }}"></td>
				<td>{{ lang.name }} <input type="hidden" name="language_name[]" value="{{ lang.name }}"></td>
				<td><input type="number" name="time_limit[]" class="form-control" value="{{ lang.default_time_limit }}"/></td>
				<td><input type="number" name="memory_limit[]" class="form-control" value="{{ lang.default_memory_limit }}"/></td>
				<td><a name="" id="" class="btn btn-danger remove_language" href="#" role="button"><i class="fa fa-remove" aria-hidden="true"></i></a></td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	</div>

<input type="submit" value="{{ edit ? 'Edit' : 'Add' }} Assignment" class="sharif_input btn btn-primary mt-2"/>

</form>
</div>
{% endblock %}  {# main_content #}
