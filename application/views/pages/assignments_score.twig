{#
 # Sharif Judge
 # file: assignments.twig
 # author: Mohammad Javad Naderi <mjnaderi@gmail.com>
 #}
{% set selected = 'assignments' %}
{% extends 'templates/base.twig' %}
{% block icon %}fas fa-folder-open{% endblock %}
{% block title %}Assignments{% endblock %}
{% block head_title %}Assignments{% endblock %}



{% block title_menu %}
{% if user.level >= 2 %}
<small>
	<nav class="nav nav-pills">
		<a class="nav-link" href="{{ site_url('assignments/add') }}"><i class="fa fa-plus color8"></i> Add</a>
		<a class="nav-link" href="{{ site_url('assignments/') }}"><i class="far fa-star color1"></i>Assingments setting</a>
		<a class="nav-link {% if mode == 'accepted' %}active {% endif %}" href="{{ site_url('assignments/scores/accepted') }}"><i class="far fa-star color1"></i>Assignments score accepted</a>
		<a class="nav-link {% if mode == 'sum' %}active {% endif %}" href="{{ site_url('assignments/scores/sum') }}"><i class="far fa-star color1"></i>Assignments score olp</a>
	</nav>
</small>

{% endif %}
{% endblock %}




{% block main_content %}
<div class="col">


{% if all_assignments|length == 0 %}
	<p style="text-align: center;">Nothing to show...</p>
{% else %}
<br/>
<table class="wecode_table table table-striped table-bordered table-sm">
<thead class="thead-dark">
	<tr>
		<th>User</th>
		{% for item in all_assignments %}
			{% if mode == 'accepted' %}
				<th class="table-secondary">
			{% else %}
				<th class="table-success">
			{% endif %}
			<small>  {{ item.name|ellipsis(99) }} </small></th>
		{% endfor %}
		<th>Sum percentage</th>
		<th>Sum percentage</th>
		<th>Average percentage</th>
	</tr>
</thead>
<tbody>
	{% for user in all_user %}
	<tr>
		<td>{{ user.username }}</td>
		
		{% if mode == 'accepted' %}{% for item in all_assignments %}
		<td class="table-success">  {{ user.assignments[item.id].accepted }} </td>
		{% endfor %}{% endif %}
		{% if mode == 'sum' %}{% for item in all_assignments %}
		<td class="table-warning">  {{ user.assignments[item.id].total }} </td>
		{% endfor %}{% endif %}

		
	</tr>
	{% endfor %}
</tbody>
</table>
{% endif %}
</div>
{% endblock %}  {# main_content #}
